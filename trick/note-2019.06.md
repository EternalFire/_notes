

- [2019.06.03](#20190603)
- [2019.06.02](#20190602)
- [2019.06.01](#20190601)

---

## 2019.06.03

git 遇到问题: fatal: refusing to merge unrelated histories 的解决方案

```
添加 --allow-unrelated-histories
git merge master --allow-unrelated-histories
```

Linux 的两条命令之间通过分号(;)连接.

Windows 的两条命令之间通过 & 连接.

<br/>

Visual Studio 2015, 在 Project Properties 面板里的 Build Events => Post-Build Event 添加:

`XCOPY *.vs ..\Debug /Y & XCOPY *.fs ..\Debug /Y`

在Project编译之后, 会自动执行XCOPY命令, 将后缀为.vs, .fs的文件复制到上级Debug目录.

这样, Debug 目录里的 exe 文件运行的时候, 就可以读取到这些文件.

<br/>

Visual Studio 调试时使用的文件路径, 是Project目录.


```lua
-- 打印累计的帧数
local totalFrames = cc.Director:getInstance():getTotalFrames()
print("totalFrames = ", totalFrames)
```


shell / cmd 是使用操作系统的一种方式.


---

## 2019.06.02

如果需要删除 git 的所有历史记录, 可以执行:

```bash
#1. 切换到新的分支, 注意 --orphan 参数.
git checkout --orphan latest_branch

#2. 暂存所有文件.
git add .

#3. 提交.
git commit -m "1"

#4. 删除 master 分支.
git branch -D master

#5. 将新分支命名为 master.
git branch -m master

#6. 推送到远程master分支, 注意 -f 参数.
git push -f origin master

```

之后, 可以执行以下命令, 删掉本地的历史记录(通过`git log`可以看到):

```
git reflog expire --expire=now --all
git gc --prune=now
git gc --aggressive --prune=now
```

---

## 2019.06.01


默认情况下, cocos2dx 的 layer 添加到 node, layer的左下角会与node的左下角重合.


```cmd
batch 打zip包

REM
REM   exe path                     type   filename  password  filelist
"C:\Program Files\7-Zip\7z.exe" a -tzip archive.zip -pzip18 GameData GameData_5Dragons patch runtime cfg-svr.json config.json SkinCFG.json UserDefault.xml
PAUSE
```


ccui.Button 加载图片

```lua
self.BtnStarRun:loadTextureNormal("5DragonsRes/Dragons_Button_2.png")
```

`checkViewReady()`, 检测界面是否就绪, 如果是, 进行下一步, 否则等待(loading).


接触 UI 系统需要了解: 使用流程, 基础控件(组件), 布局, 事件, 自定义控件.

